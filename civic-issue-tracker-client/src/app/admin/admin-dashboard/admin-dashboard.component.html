<div class="container mt-4">
  <h2 class="text-primary mb-4">
    Admin / Officer Dashboard
  </h2>

  <div *ngIf="loading" class="alert alert-info">
    Loading issues...
  </div>

  <table class="table table-bordered table-hover" *ngIf="!loading">
    <thead class="table-light">
      <tr>
        <th>Title</th>
        <th>Category</th>
        <th>Reported By</th>
        <th>Status</th>
        <th>Assign Officer</th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let issue of issues">
        <td>{{ issue.title }}</td>
        <td>{{ issue.category }}</td>
        <td>{{ issue.reportedByUserId }}</td>

        <td>
            <span class="badge" [ngClass]="getStatusClass(issue.status)">
            {{ issue.status }}
            </span>
        </td>
        <td>
          <div *ngIf="issue.status === 'Reported'">
            <select
              class="form-select mb-2"
              [(ngModel)]="selectedOfficer[issue.id]">

              <option value="">Select Officer</option>

              <option *ngFor="let o of officers" [value]="o.id">
                {{ o.name }} ({{ o.email }})
              </option>
            </select>

            <button
              class="btn btn-sm btn-primary w-100"
              (click)="assignIssue(issue.id)">
              Assign
            </button>
          </div>

          <span *ngIf="issue.status !== 'Reported'" class="text-muted">
            Assigned to:
            <strong>
              {{ issue.assignedOfficer?.name || 'N/A' }}
            </strong>
          </span>
        </td>
      </tr>
    </tbody>
  </table>
</div>